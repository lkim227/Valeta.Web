<style>
    /*.overlay {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        opacity: .2;
        filter: alpha(opacity=60);
        background-color: #6495ed;
        text-align: center;
    }

        .overlay div {
            position: relative;
            font-size: 34px;
            margin-top: -17px;
            top: 50%;
        }*/

    .k-chart .fixed-chart {
        display: inline-block;
        height: 250px;
    }
    .minPanelWidth {
        min-width: 250px;
    }
</style>

<div cg-busy="{promise:loadingPromise,message:'Loading...'}">
        <div class="page-controls-wrapper">
            <operating-location-dropdown operating-location-changed-callback="onChangeOperatingLocation(newOperatingLocation)"></operating-location-dropdown>

            <div class="date-picker-wrapper" id="dateFilter" ng-show="!!selectedOperatingLocation">
                <date-from-to from-date-time="filterFromDateTime" to-date-time="filterToDateTime" show-full-days="true"></date-from-to>
                <button class="btn btn-default" ng-click="applyDateFilter()">Apply Filter</button>
            </div>
        </div>

        <div id="dispatchReports" class="row" ng-show="!!selectedOperatingLocation && canView">
            <div id="reservationsBy" class="panel panel-default pull-left">
                <div class="panel-body">
                    <div id="noDataReservationCreatedBy" class="overlay"><div>No data available</div></div>
                    <div kendo-chart
                         k-series-defaults="{ type: 'pie' }"
                         id="chartReservationCreatedBy" class="fixed-chart"></div>
                </div>
            </div>
            <!--<div id="active" class="panel panel-default pull-left">
                <div class="panel-body">
                    <div id="noDataActiveTickets" class="overlay"><div>No data available</div></div>
                    <div kendo-chart
                         k-series-defaults="{ type: 'pie' }"
                         id="chartActiveTickets" class="fixed-chart"></div>
                </div>
            </div>-->
            <div id="allCounts" class="panel panel-default pull-left minPanelWidth">
                <div class="panel-heading">Counts</div>
                <div id="noAllCounts" class="panel-body" ng-hide="!!allCountsData"><div>No data available</div></div>
                <div class="panel-body" ng-show="!!allCountsData">
                        <div ng-repeat="item in allCountsData">
                            <span class="fieldname col-11" style="width: 350px">{{item.Name}}</span>
                            <span class="fieldvalue col-1">{{item.Value}}</span>
                        </div>
                </div>
            </div>
        </div>

        <div id="financialReports" class="row" ng-show="!!selectedOperatingLocation && canViewFinancialData">
            <div id="revenue" class="panel panel-default pull-left minPanelWidth">
                <div class="panel-heading">
                    Revenue
                    <button class="btn" ng-click="detailsRevenue()">details</button>
                </div>
                <div id="noBacklog" class="panel-body" ng-hide="!!revenueSummaryData"><div>No data available</div></div>
                <div class="panel-body" ng-show="!!revenueSummaryData">
                    <div class="row left-buffer15 right-buffer15" ng-repeat="item in revenueSummaryData">
                        <div class="fieldname pull-left">{{item.Name}}</div>
                        <div class="fieldvalue pull-right" ng-show="item.IsCurrency">{{item.Value | currency}}</div>
                        <div class="fieldvalue pull-right" ng-hide="item.IsCurrency">{{item.Value}}</div>
                    </div>
                </div>
            </div>
            <div id="estimate" class="panel panel-default pull-left minPanelWidth">
                <div class="panel-heading">
                    Estimate
                    <button class="btn" ng-click="detailsEstimate()">details</button>
                </div>
                <div id="noEstimate" class="panel-body" ng-hide="!!estimatedRevenueSummaryData"><div>No data available</div></div>
                <div class="panel-body" ng-show="!!estimatedRevenueSummaryData">
                    <div class="row left-buffer15 right-buffer15" ng-repeat="item in estimatedRevenueSummaryData">
                        <div class="fieldname pull-left">{{item.Name}}</div>
                        <div class="fieldvalue pull-right" ng-show="item.IsCurrency">{{item.Value | currency}}</div>
                        <div class="fieldvalue pull-right" ng-hide="item.IsCurrency">{{item.Value}}</div>
                    </div>
                </div>
            </div>
            <div id="estimatetoinfinity" class="panel panel-default pull-left minPanelWidth">
                <div class="panel-heading">Estimate to infinity</div>
                <div id="noEstimateToInfinity" class="panel-body" ng-hide="!!estimatedRevenueSummaryToInfinityData"><div>No data available</div></div>
                <div class="panel-body" ng-show="!!estimatedRevenueSummaryToInfinityData">
                    <div class="row left-buffer15 right-buffer15" ng-repeat="item in estimatedRevenueSummaryToInfinityData">
                        <div class="fieldname pull-left">{{item.Name}}</div>
                        <div class="fieldvalue pull-right" ng-show="item.IsCurrency">{{item.Value | currency}}</div>
                        <div class="fieldvalue pull-right" ng-hide="item.IsCurrency">{{item.Value}}</div>
                    </div>
                </div>
            </div>

            <div class="clearfix"></div>

            <table class="table-bordered" ng-show="!!ticketData">
                    <tr>
                        <th>Ticket</th>
                        <th>Name</th>
                        <th>Charged on</th>

                        <th>Parking</th>
                        <th>Services</th>
                        <th>Tips</th>
                        <th>Fees</th>
                        <th>Taxes</th>
                        <th>Total</th>
                    </tr>
                    <tr ng-repeat="ticket in ticketData">
                        <td class="left-buffer5 right-buffer5" width="90px">
                            <a class="link" ng-href="/appStaff/#/ticket/{{ticket.TicketNumber}}" target="_blank">#{{ticket.TicketNumber}}</a>
                        </td>
                        <td class="left-buffer5 right-buffer5" width="100px">{{ticket.Name}}</td>
                        <td class="left-buffer5 right-buffer5" width="210px">{{ticket.Created | date: 'short' }}</td>

                        <td class="left-buffer5 right-buffer5" width="200px">{{ticket.TotalParking | currency }}</td>
                        <td class="left-buffer5 right-buffer5" width="200px">{{ticket.TotalAdditionalService | currency }}</td>
                        <td class="left-buffer5 right-buffer5" width="150px">{{ticket.Tip | currency }}</td>
                        <td class="left-buffer5 right-buffer5" width="150px">{{ticket.FeeOnly | currency }}</td>
                        <td class="left-buffer5 right-buffer5" width="150px">{{ticket.TaxOnly | currency }}</td>
                        <td class="left-buffer5 right-buffer5" width="200px">{{ticket.Total | currency }}</td>
                    </tr>
            </table>

            <div class="clearfix"></div>

            <div class="panel panel-default">
                <div class="panel-heading">Revenue By Service Category</div>
                <div id="noServiceCategory" class="panel-body" ng-hide="!!revenueByServiceCategoryData"><div>No data available</div></div>
                <div class="panel-body" ng-show="!!revenueByServiceCategoryData">
                    <div ng-repeat="item in revenueByServiceCategoryData">
                        <div class="pull-left text-center right-buffer5">
                            <label>{{item.Name}}</label><br />
                            <div class="fieldvalue">{{item.Value}}</div><br />
                            <div class="fieldvalue">{{item.Value2 | currency}}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Refunds By Category</div>
                <div id="noRefundCategory" class="panel-body" ng-hide="!!refundsByCategoryData"><div>No data available</div></div>
                <div class="panel-body" ng-show="!!refundsByCategoryData">
                    <div ng-repeat="item in refundsByCategoryData">
                        <div class="pull-left text-center right-buffer5">
                            <label>{{item.Name}}</label><br />
                            <div class="fieldvalue">{{item.Value}}</div><br />
                            <div class="fieldvalue">{{item.Value2 | currency}}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Captured per day</div>
                <div id="noParkedPerDay" class="panel-body" ng-hide="!!parkedPerDayData"><div>No data available</div></div>
                <div class="panel-body" ng-show="!!parkedPerDayData">
                    <div ng-repeat="item in parkedPerDayData">
                        <div class="pull-left text-center right-buffer5">
                            <label>{{item.Name | date:'M/d'}}</label><br />
                            <div class="fieldvalue">{{item.Value}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>
