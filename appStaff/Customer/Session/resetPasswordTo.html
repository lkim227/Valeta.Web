<div class="change-password" ng-controller="ResetPasswordToController as vm">
    <div class="alert alert-info" ng-show="vm.passwordChangedSuccessfully">
        <h4>Your password was successfully changed!</h4>
    </div>
    
    <div class="alert alert-danger" ng-show="vm.passwordChangedSuccessfully === false">
        <h4>Could not reset the password!  Please try a different password.</h4>
    </div>

    <form role="form" ng-hide="vm.passwordChangedSuccessfully" name="changePasswordForm" ng-submit="vm.resetPasswordTo()" novalidate>
        <div class="form-horizontal" cg-busy="vm.loadingPromise">
            <div id="passwordRow" class="form-group">
                <label class="form-col-withlabel-label no-top-padding control-label" for="passwordInput">New {{vm.formMessages.Placeholder_Password}}</label>
                <div class="form-col-withlabel-input">
                    <input type="text"
                           name="newPasswordInput"
                           id="newPasswordInput"
                           ng-minlength="8"
                           required
                           class="form-control"
                           autocomplete="off"
                           ng-model="vm.newPassword" />

                    <div class="error-messages" ng-messages="changePasswordForm.newPasswordInput.$error" ng-if="changePasswordForm.newPasswordInput.$touched || changePasswordForm.$submitted">
                        <div ng-message="required">{{vm.formMessages.Required_Password}}</div>
                        <div ng-message="minlength">{{vm.formMessages.Format_Password}}</div>
                    </div>
                </div>
            </div>

            <div id="confirmPasswordRow" class="form-group">
                <label class="form-col-withlabel-label control-label" for="confirmPasswordInput">{{vm.formMessages.Placeholder_ConfirmPassword}}</label>
                <div class="form-col-withlabel-input">
                    <input type="text" data-match="#newPasswordInput" name="confirmPasswordInput" id="confirmPasswordInput" ng-minlength="8" required class="form-control" autocomplete="off" 
                           ng-model="vm.confirmPassword" />

                    <div class="error-messages" ng-messages="changePasswordForm.confirmPasswordInput.$error" ng-if="changePasswordForm.confirmPasswordInput.$touched || changePasswordForm.$submitted">
                        <div ng-message="required">{{vm.formMessages.Required_ConfirmPassword}}</div>
                        <div ng-message="minlength">{{vm.formMessages.Format_Password}}</div>
                    </div>
                    <div class="error-messages" ng-messages="{'match': vm.confirmPassword !== vm.newPassword }" ng-if="changePasswordForm.confirmPasswordInput.$touched || changePasswordForm.$submitted">
                        <div ng-message="match">{{vm.formMessages.Required_ConfirmPasswordShouldMatch}}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="form_buttons-wrapper">
                <button type="submit" class="btn btn-primary top-buffer15" ng-disabled="!changePasswordForm.$valid || !changePasswordForm.$dirty || !vm.passwordMatched">Reset Password</button>
            </div>
        </div>
    </form>
</div>